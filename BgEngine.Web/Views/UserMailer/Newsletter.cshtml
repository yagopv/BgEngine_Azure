@*==============================================================================
 This file is part of BgEngine.

 BgEngine is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 BgEngine is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with BgEngine. If not, see <http://www.gnu.org/licenses/>.
==============================================================================
 Copyright (c) 2011 Yago Pérez Vázquez
 Version: 1.0
==============================================================================*@

@{
	string homeurl = Request.Url.Scheme + "://" + Request.Url.Host;                
}

<html><head><title></title><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><style type="text/css">
/* Mobile-specific Styles */
@@media only screen and (max-device-width: 480px) { 
table[class=w0], td[class=w0] { width: 0 !important; }
table[class=w10], td[class=w10], img[class=w10] { width:10px !important; }
table[class=w15], td[class=w15], img[class=w15] { width:5px !important; }
table[class=w30], td[class=w30], img[class=w30] { width:10px !important; }
table[class=w60], td[class=w60], img[class=w60] { width:10px !important; }
table[class=w125], td[class=w125], img[class=w125] { width:80px !important; }
table[class=w130], td[class=w130], img[class=w130] { width:55px !important; }
table[class=w140], td[class=w140], img[class=w140] { width:90px !important; }
table[class=w160], td[class=w160], img[class=w160] { width:180px !important; }
table[class=w170], td[class=w170], img[class=w170] { width:100px !important; }
table[class=w180], td[class=w180], img[class=w180] { width:80px !important; }
table[class=w195], td[class=w195], img[class=w195] { width:80px !important; }
table[class=w220], td[class=w220], img[class=w220] { width:80px !important; }
table[class=w240], td[class=w240], img[class=w240] { width:180px !important; }
table[class=w255], td[class=w255], img[class=w255] { width:185px !important; }
table[class=w275], td[class=w275], img[class=w275] { width:135px !important; }
table[class=w280], td[class=w280], img[class=w280] { width:135px !important; }
table[class=w300], td[class=w300], img[class=w300] { width:140px !important; }
table[class=w325], td[class=w325], img[class=w325] { width:95px !important; }
table[class=w360], td[class=w360], img[class=w360] { width:140px !important; }
table[class=w410], td[class=w410], img[class=w410] { width:180px !important; }
table[class=w470], td[class=w470], img[class=w470] { width:200px !important; }
table[class=w580], td[class=w580], img[class=w580] { width:280px !important; }
table[class=w640], td[class=w640], img[class=w640] { width:300px !important; }
table[class*=hide], td[class*=hide], img[class*=hide], p[class*=hide], span[class*=hide] { display:none !important; }
table[class=h0], td[class=h0] { height: 0 !important; }
p[class=footer-content-left] { text-align: center !important; }
#headline p { font-size: 30px !important; }
.article-content, #left-sidebar{ -webkit-text-size-adjust: 90% !important; -ms-text-size-adjust: 90% !important; }
.header-content, .footer-content-left {-webkit-text-size-adjust: 80% !important; -ms-text-size-adjust: 80% !important;}
 } 

/* Client-specific Styles */
#outlook a { padding: 0; }	/* Force Outlook to provide a "view in browser" button. */
body { width: 100% !important; }
.ReadMsgBody { width: 100%; }
.ExternalClass { width: 100%; display:block !important; } /* Force Hotmail to display emails at full width */

/* Reset Styles */
/* Add 100px so mobile switch bar doesn't cover street address. */
body { background-color: #c7c7c7; margin: 0; padding: 0; }
img { height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;}
br, strong br, b br, em br, i br { line-height:100%; }
h1, h2, h3, h4, h5, h6 { line-height: 100% !important; -webkit-font-smoothing: antialiased; }
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a { color: blue !important; }
h1 a:active, h2 a:active,  h3 a:active, h4 a:active, h5 a:active, h6 a:active {	color: red !important; }
/* Preferably not the same color as the normal header link color.  There is limited support for psuedo classes in email clients, this was added just for good measure. */
h1 a:visited, h2 a:visited,  h3 a:visited, h4 a:visited, h5 a:visited, h6 a:visited { color: purple !important; }
/* Preferably not the same color as the normal header link color. There is limited support for psuedo classes in email clients, this was added just for good measure. */  
table td, table tr { border-collapse: collapse; }
.yshortcuts, .yshortcuts a, .yshortcuts a:link,.yshortcuts a:visited, .yshortcuts a:hover, .yshortcuts a span {
color: black; text-decoration: none !important; border-bottom: none !important; background: none !important;
}	/* Body text color for the New Yahoo.  This example sets the font of Yahoo's Shortcuts to black. */

/* This most probably won't work in all email clients. Don't include &lt;code _tmplitem="26" &gt; blocks in email. */
code {
  white-space: normal;
  word-break: break-all;
}
#background-table { background-color: #c7c7c7; }

/* Webkit Elements */
#top-bar { border-radius:6px 6px 0px 0px; -moz-border-radius: 6px 6px 0px 0px; -webkit-border-radius:6px 6px 0px 0px; -webkit-font-smoothing: antialiased; background-color: #2E2E2E; color: #888888; }
#top-bar a { font-weight: bold; color: #eeeeee; text-decoration: none;}
#footer { border-radius:0px 0px 6px 6px; -moz-border-radius: 0px 0px 6px 6px; -webkit-border-radius:0px 0px 6px 6px; -webkit-font-smoothing: antialiased; }

/* Fonts and Content */
body, td { font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; }
.header-content, .footer-content-left, .footer-content-right { -webkit-text-size-adjust: none; -ms-text-size-adjust: none; }
/* Prevent Webkit and Windows Mobile platforms from changing default font sizes on header and footer. */
.header-content { font-size: 12px; color: #888888; }
.header-content a { font-weight: bold; color: #eeeeee; text-decoration: none; }
#headline p { color: #232829; font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; font-size: 36px; text-align: center; margin-top:0px; margin-bottom:30px; }
#headline p a { color: #232829; text-decoration: none; }
.article-title { font-size: 18px; line-height:24px; color: #2f82de; font-weight:bold; margin-top:0px; margin-bottom:18px; font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; }
.article-title a { color: #2f82de; text-decoration: none; }
.article-title.with-meta {margin-bottom: 0;}
.article-meta { font-size: 13px; line-height: 20px; color: #ccc; font-weight: bold; margin-top: 0;}
.article-content { font-size: 13px; line-height: 18px; color: #424147; margin-top: 0px; margin-bottom: 18px; font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; }
.article-content a { color: #2f82de; font-weight:bold; text-decoration:none; }
.article-content img { max-width: 100% }
.article-content ol, .article-content ul { margin-top:0px; margin-bottom:18px; margin-left:19px; padding:0; }
.article-content li { font-size: 13px; line-height: 18px; color: #424147; }
.article-content li a { color: #2f82de; text-decoration:underline; }
.article-content p {margin-bottom: 15px;}
.footer-content-left { font-size: 12px; line-height: 15px; color: #888888; margin-top: 0px; margin-bottom: 15px; }
.footer-content-left a { color: #eeeeee; font-weight: bold; text-decoration: none; }
.footer-content-right { font-size: 11px; line-height: 16px; color: #888888; margin-top: 0px; margin-bottom: 15px; }
.footer-content-right a { color: #eeeeee; font-weight: bold; text-decoration: none; }
#footer { background-color: #000000; color: #888888; }
#footer a { color: #eeeeee; text-decoration: none; font-weight: bold; }
#permission-reminder { white-space: normal; }
#street-address { color: #ffffff; white-space: normal; }
</style>
<!--[if gte mso 9]>
<style _tmplitem="26" >
.article-content ol, .article-content ul {
   margin: 0 0 0 24px;
   padding: 0;
   list-style-position: inside;
}
</style>
<![endif]--></head><body><table width="100%" cellspacing="0" cellpadding="0" border="0" id="background-table">
	<tbody><tr>
		<td bgcolor="#c7c7c7" align="center">
			<table width="640" cellspacing="0" cellpadding="0" border="0" style="margin:0 10px;" class="w640">
				<tbody><tr><td width="640" height="20" class="w640"></td></tr>
				<!-- #HEADER
				================================================== -->
				<tr>
					<td width="640" class="w640">
						<table width="640" cellspacing="0" cellpadding="0" border="0" bgcolor="#D9E5F4" class="w640" id="top-bar">
	<tbody><tr>
		<td width="15" class="w15"></td>
		<td width="350" valign="middle" align="left" class="w325">
			<table width="350" cellspacing="0" cellpadding="0" border="0" class="w325">
				<tbody><tr><td width="350" height="8" class="w325"></td></tr>
			</tbody></table>
			<div class="header-content"><a class="cm-webversion" href="@Url.Abs(homeurl)">@Resources.EmailTemplates.Newsletter_ViewInBrowser</a><span class="hide">&nbsp;&nbsp;|&nbsp; <a class="cm-unsubscribe" href="@Url.Abs(Url.RouteUrl("Default", new { controller="Subscription", action="Unsubscribe" }))">@Resources.EmailTemplates.Newsletter_ClickToUnsubscribe</a></span></div>
			<table width="350" cellspacing="0" cellpadding="0" border="0" class="w325">
				<tbody><tr><td width="350" height="8" class="w325"></td></tr>
			</tbody></table>
		</td>
		<td width="30" class="w30"></td>
		<td width="255" valign="middle" align="right" class="w255">
			<table width="255" cellspacing="0" cellpadding="0" border="0" class="w255">
				<tbody><tr><td width="255" height="8" class="w255"></td></tr>
			</tbody></table>
			<table cellspacing="0" cellpadding="0" border="0">
	<tbody><tr>     

		<td valign="middle"><a class="cm-fblike" href="http://www.facebook.com/sharer.php?u=@homeurl"><img width="8" height="14" border="0" cm_dontimportimage="" alt="Facebook icon" src="https://img.createsend1.com/img/templatebuilder/like-glyph.png"></a></td>
		<td width="3"></td>
		<td valign="middle"><div class="header-content"><a class="cm-fblike" href="#">@Resources.EmailTemplates.Newsletter_ShareOnFacebook</a></div></td>            
		<td width="10" class="w10"></td>
		<td valign="middle"><a class="cm-tweet" href="http://twitter.com/share?text=@homeurl"><img width="17" height="13" border="0" cm_dontimportimage="" alt="Twitter icon" src="https://img.createsend1.com/img/templatebuilder/tweet-glyph.png"></a></td>
		<td width="3"></td>
		<td valign="middle"><div class="header-content"><a class="cm-tweet" href="#">@Resources.EmailTemplates.Newsletter_ShareOnTwitter</a></div></td>
		<td width="10" class="w10"></td>
	</tr>
</tbody></table>
			<table width="255" cellspacing="0" cellpadding="0" border="0" class="w255">
				<tbody><tr><td width="255" height="8" class="w255"></td></tr>
			</tbody></table>
		</td>
		<td width="15" class="w15"></td>
	</tr>
</tbody></table>
						<!-- End top bar table -->
					</td>
				</tr>
				<tr>
				<td width="640" bgcolor="#D9E5F4" align="center" class="w640" id="header">  
	<table width="640" cellspacing="0" cellpadding="0" border="0" class="w640">
		<tbody><tr><td width="30" class="w30"></td><td width="580" height="30" class="w580"></td><td width="30" class="w30"></td></tr>
		<tr>
			<td width="30" class="w30"></td>
			<td width="580" class="w580">
				<div align="center" id="headline">
					<p>
						<strong><span label="Title" class="cm-singleline">@ViewBag.Newsletter</span></strong>
					</p>
				</div>
			</td>
			<td width="30" class="w30"></td>
		</tr>
	</tbody></table>
	<!-- End header image -->
</td>
				</tr>
				<!-- #CONTENT
				================================================== -->
				<tr><td width="640" height="30" bgcolor="#ffffff" class="w640"></td></tr>
				<tr id="simple-content-row">
				<td width="640" bgcolor="#ffffff" class="w640">
				
	<table width="640" cellspacing="0" cellpadding="0" border="0" class="w640">
		<tbody><tr>
			<td width="30" class="w30"></td>
			<td width="580" id="content-column" class="w580">
				
				@foreach (var post in ViewBag.Posts)
				{
					string path;	
					if (post.Image == null)
					{
						path = Url.Content("~/Content/Icons/no_image.jpg");
						<!-- #TEXT ONLY
						================================================== -->
						<table width="580" cellspacing="0" cellpadding="0" border="0" class="w580">
							<tbody><tr>
								<td width="580" class="w580">
									<div align="left" class="article-title"><a style="text-decoration:none; color: #2f82de;" href="@Url.Abs(Url.RouteUrl("Default", new { action = "GetPostByCode", controller = "Post", id = post.Code }))">@post.Title</a></div>
									<div align="left" class="article-content">
										@Html.Raw(post.Description)									
									</div>
								</td>
							</tr>
							<tr><td width="580" height="10" class="w580"></td></tr>
						</tbody></table>						
					}
					else
					{
						path = Url.Content(post.Image.Path);
						<!-- #TEXT WITH LEFT-ALIGNED IMAGE
						================================================== -->
						<table width="580" cellspacing="0" cellpadding="0" border="0" class="w580">
							<tbody><tr>
								<td width="580" class="w580">
									<div align="left" class="article-title"><a style="text-decoration:none;" href="@Url.Abs(Url.RouteUrl("Default", new { action = "GetPostByCode", controller = "Post", id = post.Code }))">@post.Title</a></div>
									<table cellspacing="0" cellpadding="0" border="0" align="left">
										<tbody><tr>
											<td><img width="150" border="0" class="w300" src="@Url.Abs(path)" label="Image" editable="true"></td>
											<td width="15" class="w30"></td>
										</tr>
										<tr><td></td><td width="15" height="5" class="w30"></td></tr>
									</tbody></table>
									<div align="left" class="article-content">
										@Html.Raw(post.Description)
									</div>
								</td>
							</tr>
							<tr><td width="580" height="10" class="w580"></td></tr>
						</tbody></table>     						
					}   												
				}								                                                                                                          
			</td>
			<td width="30" class="w30"></td>
		</tr>
	</tbody></table>
</td>
				</tr>
				<tr><td width="640" height="15" bgcolor="#ffffff" class="w640"></td></tr>
				<!-- #FOOTER
				 ================================================== -->
				<tr>
				<td width="640" class="w640">
	<table width="640" cellspacing="0" cellpadding="0" border="0" bgcolor="#000000" class="w640" id="footer">
		<tbody><tr><td width="30" class="w30"></td><td width="360" height="30" class="w580 h0"></td><td width="60" class="w0"></td><td width="160" class="w0"></td><td width="30" class="w30"></td></tr>
		<tr>
			<td width="30" class="w30"></td>
			<td width="360" valign="top" class="w580">
			<span class="hide"><p align="left" class="footer-content-left" id="permission-reminder"></p></span>
			<p align="left" class="footer-content-left"><a class="cm-unsubscribe" href="@Url.Abs(Url.RouteUrl("Default", new { controller="Subscription", action="Unsubscribe" }))">@Resources.EmailTemplates.Newsletter_ClickToUnsubscribe</a></p>
			</td>
			<td width="60" class="hide w0"></td>
			<td width="160" valign="top" class="hide w0">
			<p align="right" class="footer-content-right" id="street-address"></p>
			</td>
			<td width="30" class="w30"></td>
		</tr>
		<tr><td width="30" class="w30"></td><td width="360" height="15" class="w580 h0"></td><td width="60" class="w0"></td><td width="160" class="w0"></td><td width="30" class="w30"></td></tr>
	</tbody></table>
</td>
				</tr>
				<tr><td width="640" height="60" class="w640"></td></tr>
			</tbody></table>
		</td>
	</tr>
</tbody></table></body></html>