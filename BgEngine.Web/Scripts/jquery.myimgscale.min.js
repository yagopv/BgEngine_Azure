(function(a){a.fn.scaleImage=function(c){var d=a.extend({parent:false,scale:"fill",center:true,fade:0},c);return this.each(function(){var g=a(this);var h=d.parent?g.parents(d.parent):g.parent();h.css({opacity:0,overflow:"hidden"});if(h.length>0){g.removeAttr("height").removeAttr("width");if(this.complete){f(g,h)}else{g.load(function(){f(g,h)})}}});function f(h,l){var r=b(h),s=r.width,k=r.height,t=l.width(),n=l.height(),u=parseInt(h.css("borderLeftWidth"),10)+parseInt(h.css("borderRightWidth"),10),o=parseInt(h.css("borderTopWidth"),10)+parseInt(h.css("borderBottomWidth"),10),q,p,j,m,g;if(n==0||t==0){var i=e(l);t=i.width;n=i.height}u=isNaN(u)?0:u;o=isNaN(o)?0:o;q=t/s;p=n/k;if(d.scale==="fit"){j=q<p?q:p}else{if(d.scale==="fill"){j=q>p?q:p}}m=parseInt(s*j,10)-u;g=parseInt(k*j,10)-o;h.css({width:m,height:g}).attr({width:m,height:g});if(d.center){if(m>t){h.css("margin-left","-"+Math.floor((m-t)/2)+"px")}if(g>n){h.css("margin-top","-"+Math.floor((g-n)/2)+"px")}}if(d.fade>0){l.animate({opacity:1},d.fade)}else{l.css("opacity",1)}}function b(h){var g=new Image();g.src=h.attr("src");return{width:g.width,height:g.height}}function e(h){var i=h.clone().css({visibility:"hidden",display:"block",position:"absolute"});a("body").append(i);var g={width:i.width(),height:i.height()};i.remove();return g}}})(jQuery);